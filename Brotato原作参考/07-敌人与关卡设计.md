# Brotato敌人与关卡设计

## 关卡结构

### 20波结构

Brotato采用固定的20波结构，这是一个经过精心设计的数字：

#### 波次时长（官方Wiki数据）

| 波次 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10-19 | 20 |
|------|---|---|---|---|---|---|---|---|---|-------|-----|
| 秒数 | 20 | 25 | 30 | 35 | 40 | 45 | 50 | 55 | 60 | 60 | 90 |

**时长分析**：
- 前9波逐渐增加（20→60秒）
- 中期稳定（60秒/波）
- Boss波特别长（90秒）
- 总战斗时长：约20分钟
- 加上商店时间：约25-35分钟

#### 难度分段
- **第1-5波**：教学/入门阶段
- **第6-10波**：成长阶段
- **第11-15波**：挑战阶段（精英敌人开始出现）
- **第16-19波**：困难阶段（Buffer出现）
- **第20波**：Boss/终局阶段

#### 构筑完成度
- 前5波：建立基础（25%）
- 前10波：构筑成型（50%）
- 前15波：构筑完善（75%）
- 前20波：构筑极限（100%）

---

## 敌人成长公式

### HP成长公式（官方Wiki）

```
敌人HP = 基础HP + (当前波次 - 1) × 每波增加HP
```

**示例**：Pursuer（追击者）
- 基础HP：10
- 每波增加：+24
- 第11波（首次出现）：10 + (11-1) × 24 = 10 + 240 = **250 HP**

### 伤害成长公式

```
敌人伤害 = 基础伤害 + (当前波次 - 1) × 每波增加伤害
```

### Danger等级影响

| Danger等级 | HP/伤害加成 | 特殊效果 |
|------------|-------------|----------|
| Danger 0 | 基础值 | 标准敌人配置 |
| Danger 1 | 基础值 | 更多敌人类型提前出现 |
| Danger 2-4 | 基础值 | 精英敌人出现 |
| **Danger 5** | **+40%** | 两个Boss同时出现（各75%血量） |

---

## 敌人设计理念

### 目标优先级系统

Brotato的敌人设计核心理念是**通过敌人特性自然形成目标优先级**。

#### 最高优先级：强化/治疗型

**Buffer（强化者）**：
- 速度：150（中慢速，会逃离玩家）
- 效果：强化周围敌人 **HP+150%，伤害+25%，速度+50%**
- 被强化敌人有**红色轮廓**
- **必须第一时间击杀**

**Healer（治疗者）**：
- 速度：**400（快速！）**
- 效果：治疗周围敌人100HP（每波+10）
- 会围绕敌人群移动
- **需要追击，不是慢速敌人**

#### 高威胁：冲锋型

**Charger（冲锋者）**：
- 速度：400
- 机制：每2.5-3.5秒冲锋
- 威胁：快速接近，高伤害

**Pursuer（追击者）**：
- 速度：150→600（持续加速）
- 最终比玩家更快
- 必须快速击杀

#### 中威胁：填充型

**Baby Alien、Chaser**等：
- 大量生成
- 中等速度
- 提供基础挑战和资源

---

## 敌人类型设计（基于Wiki数据修正）

### 按移动速度分类

> **玩家基础速度：450**

#### 1. 极速型（400+）
- **移动速度**：400-425
- **代表敌人**：
  - Charger（400）- 冲锋者
  - Healer（400）- 治疗者
  - Fin Alien（400）- 鳍外星人
  - Horned Charger（425）- 角冲锋者
- **设计意义**：接近玩家速度，难以风筝
- **对策**：必须正面击杀或高Speed构筑

#### 2. 快速型（300-400）
- **移动速度**：300-400
- **代表敌人**：
  - Chaser（380）- 追逐者
  - Fly（325-375）- 苍蝇
  - Junkie（350）- 瘾君子
  - Looter（300-400）- 抢劫者
  - Lamprey（350）- 七鳃鳗
- **设计意义**：持续追踪压力
- **对策**：需要一定Speed才能风筝

#### 3. 中速型（200-300）
- **移动速度**：200-300
- **代表敌人**：
  - Baby Alien（200-300）- 外星婴儿
  - Bruiser（300）- 打手
  - Spitter（200）- 喷射者
  - Slasher（250-300）- 斩击者
- **设计意义**：主力敌人，可风筝
- **对策**：保持距离输出

#### 4. 慢速型（100-200）
- **移动速度**：100-200
- **代表敌人**：
  - Buffer（150）- 强化者
  - Tentacle（175）- 触手
  - Spawner（120）- 召唤者
  - Sea Pig（150）- 海猪
- **设计意义**：高价值目标
- **对策**：追击击杀

#### 5. 静止/极慢型（0-100）
- **移动速度**：0-100
- **代表敌人**：
  - Tree（0）- 树（中立）
  - Slasher Egg（0）- 斩击蛋
  - Viperfish（80）- 蝰鱼
  - Anemone（100）- 海葵
- **设计意义**：远程或特殊机制
- **对策**：可选择性处理

### 按攻击模式分类

#### 1. 接触型
- **攻击方式**：接触玩家造成伤害
- **代表**：Baby Alien, Chaser, Charger, Bruiser
- **对策**：保持距离

#### 2. 远程型
- **攻击方式**：发射弹道
- **代表**：Spitter, Junkie, 各种精英
- **对策**：躲避弹道或优先击杀

#### 3. 召唤型
- **攻击方式**：生成其他敌人
- **代表**：Spawner（死亡生成3个Junkie）
- **对策**：准备范围伤害

#### 4. 反弹型
- **攻击方式**：被击中后反弹弹道
- **代表**：Fly（被远程击中会反弹弹道）
- **对策**：使用近战武器

### 按特殊机制分类

#### 1. 强化型（最高优先级）
- **机制**：强化周围敌人HP+150%/伤害+25%/速度+50%
- **代表**：Buffer, Stonefish(DLC)
- **设计意义**：创造目标优先级核心

#### 2. 治疗型（高优先级）
- **机制**：恢复周围敌人生命
- **代表**：Healer(100+10/波), Hermit(DLC)
- **注意**：Healer是快速敌人（400速度）

#### 3. 召唤型
- **机制**：生成其他敌人
- **代表**：Spawner, Monk(精英)
- **策略**：控制敌人数量

#### 4. 分裂/孵化型
- **机制**：死亡或一段时间后产生新敌人
- **代表**：
  - Slasher Egg（5秒后孵化Slasher）
  - Blobfish(DLC)（死亡生成4 Lamprey+1 Sea Pig）
- **策略**：快速击杀或准备范围伤害

#### 5. 加速型
- **机制**：持续加速
- **代表**：Pursuer（150→600，最终超过玩家）
- **策略**：必须快速击杀

---

## 敌人数值设计

### 敌人HP/伤害示例（第1波 vs 第20波）

| 敌人 | 基础HP | +HP/波 | 第1波HP | 第20波HP |
|------|--------|--------|---------|----------|
| Baby Alien | 3 | 2.0 | 3 | 41 |
| Chaser | 1 | 1.0 | 1 | 20 |
| Charger | 4 | 2.5 | 4 | 51 |
| Bruiser | 20 | 11.0 | 20 | 229 |
| Pursuer | 10 | 24.0 | - | 250(第11波) |
| Slasher | 50 | 25.0 | - | 525(第20波) |

### 精英敌人HP（第11波起）

精英敌人基础HP=1，但每波+750HP：
- 第11波：1 + 10×750 = **7,501 HP**
- 第15波：1 + 14×750 = **10,501 HP**
- 第20波：1 + 19×750 = **14,251 HP**

**注意**：精英在第11-12波出现时只有75%血量

### Boss HP（第20波）

| Boss | HP | Danger 5 HP |
|------|-----|-------------|
| Predator | 29,250 | 30,712 |
| Invoker | 29,250 | 30,712 |
| Dead Whale(DLC) | 31,625 | 33,206 |
| Eel(DLC) | 31,625 | 33,206 |

---

## 波次组合设计

### 敌人首次出现总览

| 波次 | 新增敌人 | 关键变化 |
|------|----------|----------|
| 1 | Tree, Baby Alien, Gobbler | 入门 |
| 2 | Chaser | 成群追踪 |
| 3 | Charger, Looter | 冲锋威胁 |
| 4 | Spitter, Fly(D1), Slasher(D1) | 远程/反弹 |
| 7 | Healer(D1), Slasher Egg(D1) | **治疗机制** |
| 8 | Bruiser, Horned Bruiser(D1) | 高血量 |
| 11 | Pursuer, **精英开始** | 加速追踪 |
| 14 | Spawner, Junkie | 召唤机制 |
| 16 | **Buffer** | **强化机制** |
| 20 | Boss | 终局 |

### 组合策略示例

#### 早期波次（1-5波）
- 主要：Baby Alien, Chaser
- 少量：Charger, Spitter
- 玩家任务：学习基本操作

#### 中期波次（6-10波）
- 加入：Bruiser（高血量）
- Danger 1+：Healer（治疗机制）
- 玩家任务：建立输出能力

#### 挑战波次（11-15波）
- 加入：Pursuer（加速追踪）
- 精英敌人开始出现
- 玩家任务：应对多重威胁

#### 困难波次（16-19波）
- **Buffer出现**（第16波）
- 复杂敌人组合
- 玩家任务：优先级判断

#### Boss波（第20波）
- 1个超级Boss（29,250 HP）
- 持续生成小怪
- 多阶段机制
- 玩家任务：终极考验

---

## 地图设计

### 地图特点

#### 1. 竞技场式封闭空间
- 固定边界
- 玩家无法无限逃跑
- 迫使玩家正面应对

#### 2. 障碍物
- Tree（树）作为障碍
- 可以利用走位卡位
- 也可能阻碍自己的移动

#### 3. 敌人生成
- 从地图边缘生成
- 全方位包围玩家
- 需要360度应对威胁

### 敌人数量上限

- 屏幕上最多同时存在 **100个敌人**
- 超出时随机非精英/Boss敌人会消失（不掉落材料）
- Pacifist角色例外：消失的敌人仍获得0.65材料

---

## 关卡设计的强化与惩罚机制

### 强化机制

| 敌人 | 不击杀的后果 |
|------|--------------|
| Buffer | 周围敌人HP+150%/伤害+25%/速度+50% |
| Healer | 敌人被持续治疗100+HP/秒 |
| Spawner | 敌人数量失控 |
| Slasher Egg | 5秒后孵化强力Slasher |

### 惩罚机制

| 失误 | 后果 |
|------|------|
| 忽视Buffer | 整体难度大幅提升 |
| 忽视Healer | 战斗时间延长 |
| 被Pursuer追上 | 持续高伤害 |
| 走位失误 | 被包围，难以脱身 |

---

## 关卡设计启示

### 1. 目标优先级的自然形成
不需要UI标记"优先击杀"，通过敌人机制让玩家自然产生判断：
- Buffer/Stonefish：红色轮廓提示强化效果
- Healer：看到敌人被治疗自然想击杀

### 2. 多样性对抗单调
每波不同的敌人组合保持新鲜感：
- 接触型 vs 远程型
- 快速型 vs 慢速型
- 普通敌人 vs 特殊机制

### 3. 测试构筑的全面性
不同波次测试构筑的不同方面：
- 单体输出：对抗高血量敌人
- 范围输出：对抗大量小怪
- 生存能力：对抗冲锋/Boss
- 移动速度：风筝能力

### 4. 难度的渐进式提升
- 数值成长（HP/伤害每波增加）
- 机制复杂度（新敌人类型）
- 组合压力（多种威胁同时）

### 5. 紧张感与节奏
- 早期波次短（20-40秒）：快节奏
- 后期波次长（60秒）：持续压力
- Boss波最长（90秒）：终极挑战

---

## 总结

Brotato的关卡设计精髓在于：
1. **通过机制而非标记创造优先级**
2. **多样化组合对抗单调**
3. **精确的数值成长曲线**
4. **测试构筑的多个维度**
5. **渐进式的时长和难度**

---

**数据来源**：https://brotato.wiki.spellsandguns.com/Enemies  
**最后更新**：2024年12月31日
