# Brotato核心玩法机制

## 游戏流程

### 整体结构
```
开始游戏 → 选择角色 → 进入第1波战斗 → 商店阶段 → 第2波战斗 → ... → 第20波战斗 → 胜利/失败
```

### 单波流程
```
准备阶段（商店） → 战斗阶段 → 结算阶段 → 下一波准备阶段
```

## 战斗阶段

### 核心机制

1. **自动射击系统**
   - 武器默认自动向最近的敌人射击
   - 玩家无需手动瞄准（可选手动瞄准模式）
   - 玩家主要控制角色移动和走位

2. **多武器同时使用**
   - 最多携带6种武器
   - 所有武器同时攻击
   - 每种武器有独立的攻击间隔和冷却时间

3. **移动与走位**
   - 玩家通过键盘/摇杆控制角色移动
   - 走位是生存的关键
   - 需要在攻击和躲避之间找到平衡

4. **敌人生成**
   - 敌人从地图边缘不断生成
   - 敌人类型和数量随波次递增
   - 每波有固定的时间限制

### 战斗目标
- 击败所有敌人
- 生存至时间结束
- 尽可能收集掉落的资源

## 商店阶段

### 商店机制

1. **购买系统**
   - 使用金币购买武器和道具
   - 使用材料刷新商店
   - 商店有固定数量的商品槽位

2. **刷新机制**
   - 使用材料可以刷新商店
   - 刷新次数无限
   - **每次刷新所需材料递增**（重要平衡机制）
   - 刷新成本：首次刷新较便宜，之后逐步增加

3. **商品品质系统**
   - 武器和道具分为4个品质等级：
     - 一级（黑色/普通）
     - 二级（蓝色/稀有）
     - 三级（紫色/史诗）
     - 四级（红色/传说）
   - **品质影响因素**：
     - 角色幸运属性
     - 当前波次（波次越高，高品质概率越大）

4. **商品类型**
   - **武器**：提供攻击能力
   - **可叠加道具**：可多次购买，效果累加
   - **唯一道具**：购买后不再出现在商店中
   - **属性升级**：直接提升角色基础属性

5. **武器类型限制**
   - 商店刷新的武器类型受角色和当前持有武器影响
   - 某些角色限制特定武器类型（如角斗士只能用近战）

### 升级系统

1. **经验与升级**
   - 击败敌人获得经验
   - 每波结算时根据经验提升等级
   - 升级后获得属性点或特殊奖励

2. **属性提升**
   - 在商店阶段可以用金币购买属性提升
   - 常见属性包括：
     - 最大生命值
     - 攻击力
     - 攻击速度
     - 暴击率
     - 移动速度
     - 护甲
     - 闪避
     - 生命恢复
     - 幸运值等

## 资源系统

### 三种核心资源

1. **金币（Materials）**
   - 击败敌人掉落
   - 用于购买武器和道具
   - 用于购买属性提升
   - 主要资源

2. **材料（Materials）**
   - 击败敌人掉落
   - 用于刷新商店
   - 重要的战略资源

3. **经验值（XP）**
   - 击败敌人掉落
   - 用于角色升级
   - 影响角色实力成长

### 资源管理特色

1. **掉落保留机制**
   - 未拾取的金币会在下一波开始时重新掉落
   - 标识为"x2"提醒玩家
   - 经验值全部自动结算
   - **培养玩家资源经营意识**

2. **收益优化**
   - 通过提升"收获"属性增加资源掉落
   - 某些道具可以提供额外的资源获取
   - 资源获取与风险控制的平衡

## 波次进程

### 20波结构

- **第1-5波**：入门阶段
  - 敌人较弱
  - 建立基础构筑
  - 积累初始资源

- **第6-10波**：成长阶段
  - 敌人强度提升
  - 构筑初步成型
  - 开始面临选择压力

- **第11-15波**：挑战阶段
  - 敌人强度明显增加
  - 需要优化构筑
  - 资源管理更加重要

- **第16-20波**：终局阶段
  - 最强敌人出现
  - 构筑完全成型
  - 生存压力最大
  - Boss波次（第20波）

### 难度曲线

- **基础数值**：保证前期怪物的基本表现
- **成长数值**：确保怪物随玩家成长
- **平行上升**：保持难度的平衡递增
- 避免出现明显的难度断层

## 游戏节奏

- 战斗阶段：紧张刺激，需要专注
- 商店阶段：策略思考，规划构筑
- 两个阶段交替，张弛有度
- 整体游戏时长控制在30分钟以内


